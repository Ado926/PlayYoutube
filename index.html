<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ori√≥n X - Buscador de M√∫sica</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Men√∫ lateral -->
  <div id="side-menu" class="side-menu">
    <button id="close-menu" class="close-button">‚úñ</button>
    <h2>Historial</h2>
    <div id="history-list">
      <h3 id="toggle-played">Reproducidas</h3>
      <ul id="played-history" class="history-list"></ul>

      <h3 id="toggle-downloaded">Descargadas</h3>
      <ul id="downloaded-history" class="history-list"></ul>
    </div>
  </div>

  <!-- Encabezado -->
  <header class="header">
    <h1>Ori√≥n X</h1>
    <button id="menu-button" class="menu-button">‚ò∞</button>
  </header>

  <div class="container">
    <form id="search-form">
      <input type="text" id="search-input" placeholder="üîç Buscar canciones o artistas..." required />
      <button type="submit">Buscar</button>
    </form>

    <!-- Mensaje de carga -->
    <div id="loading-message" class="loading-message" style="display: none;">
      Buscando m√∫sica...
    </div>

    <div class="music-list" id="music-list">
      <!-- Aqu√≠ se insertar√°n las canciones -->
    </div>
  </div>

  <!-- Reproductor de m√∫sica -->
  <audio id="audio-player" controls style="width: 100%; margin-top: 20px; display: none;"></audio>

  <!-- Scripts -->
  <script src="api.js"></script>
  <script>
    // Men√∫ lateral
    const menuBtn = document.getElementById("menu-button");
    const closeBtn = document.getElementById("close-menu");
    const sideMenu = document.getElementById("side-menu");

    menuBtn.onclick = () => sideMenu.classList.add("open");
    closeBtn.onclick = () => sideMenu.classList.remove("open");

    // Historial con localStorage
    const playedList = document.getElementById("played-history");
    const downloadedList = document.getElementById("downloaded-history");

    function loadHistory() {
      const played = JSON.parse(localStorage.getItem("played") || "[]");
      const downloaded = JSON.parse(localStorage.getItem("downloaded") || "[]");

      playedList.innerHTML = played.length
        ? played.map(item => `<li>${item}</li>`).join("")
        : "<li>No hay canciones reproducidas a√∫n.</li>";

      downloadedList.innerHTML = downloaded.length
        ? downloaded.map(item => `<li>${item}</li>`).join("")
        : "<li>No hay canciones descargadas a√∫n.</li>";
    }

    function addToHistory(type, title) {
      const key = type === "played" ? "played" : "downloaded";
      const data = JSON.parse(localStorage.getItem(key) || "[]");
      if (!data.includes(title)) {
        data.unshift(title);
        localStorage.setItem(key, JSON.stringify(data.slice(0, 50)));
      }
    }

    // Toggle listas
    document.getElementById("toggle-played").onclick = () => {
      playedList.classList.toggle("visible");
    };
    document.getElementById("toggle-downloaded").onclick = () => {
      downloadedList.classList.toggle("visible");
    };

    // Inicializar historial al cargar
    loadHistory();
  </script>
</body>
</html>